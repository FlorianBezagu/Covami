#{extends 'main.html' /}
#{set title:'Profile' /}


<div id="edit-profile">
	<h1>&{'pages.title.seeprofile'}</h1>
	<div class="item">
		#{DisplayForModel model:member, editable:false /}
			
		#{ifnot me.id == member.id}
			
			#{if applicants.contains(member)}
				#{form @Pending.accept()}
					<input type="hidden" name="applicantId" value="${member.id}" />
					<input type="submit" value="&{'pendings.invitation.accept'}" />
				#{/form}
				
				#{form @Pending.deny()}
					<input type="hidden" name="applicantId" value="${member.id}" />
					<input type="submit" class="pending" value="&{'pendings.invitation.deny'}" />
				#{/form}
			#{/if}
			
			#{elseif pendings.contains(member)}
			<p>
				&{'members.inviteFriendSuccess'}
			</p>
			#{/elseif}
			
			#{elseif !me.friends.contains(member)}
			<p>
				<a class="submit" href="@{Members.inviteFriend(member.id)}" >&{'member.friends.add'}</a>
			</p>
			#{/elseif}
			
			
		#{/ifnot}
	</div>
	<h1>&{'pages.title.seeprofile.vehicles'}</h1>
		#{if member.vehicles.size() > 0}
			#{list items:member.vehicles, as:'vehicle'}
				<div class="item">
					${vehicle.model.make} ${vehicle.model.model} ${vehicle.model.nbPlaces} places
				</div>
			#{/list}
		#{/if}
		#{else}
			<h2>&{'vehicles.noVehicle'}</h2>
		#{/else}
</div>